<!DOCTYPE html>
<html lang="en">
<head>
<title>Prescription Price Calculator</title>
<link rel="stylesheet" type="text/css" href="main_style_v1.css">

<!-- Global Variables -->
<script> 
var AJAXtimer;

//Add items as nested array/objects
var DrugItemsList = [];
// Format of array/objects
//
//	DrugItemsList
//	|
// [0]-----GenericName: "Metformin HCl"
//  |   |
//  |   └--NextLevel--[0]-----Form: "500 mg Oral Tablet"
//  |                  |   |
//  |                  |   └--NextLevel--[0]-----BrandName: "Glucophage (Sanofi - Aventis)"
//  |                  |                  |   |
//  |                  |                  |   └--UnitPrice: "0.2716"
//  |                  |                  |
//  |                  |                 [1]-----BrandName: "Teva-Metformin (Teva Canada Limited)"
//  |                  |                      |
//  |                  |                      └--UnitPrice: "0.0587"
//  |                  |
//  |                 [1]-----Form: "850 mg Oral Tablet"
//  |                      |
//  |                      └--NextLevel--[0]-----BrandName: "Glucophage (Sanofi - Aventis)"
//  |                                     |   |
//  |                                     |   └--UnitPrice: "0.3623"
//  |                                     |
//  |                                    [1]-----BrandName: "Teva-Metformin (Teva Canada Limited)"
//  |                                         |
//  |                                         └--UnitPrice: "0.0847"
//  |
// [1]-----GenericName: "Warfarin Sodium"
//      |
//      └--NextLevel--[0]-----Form: "1 mg Oral Tablet"
// ...
</script>
<script src="functions.js"></script>
</head>

<body>
<div class="wrapper">
<div class="titlewrap">
	<div class="contentcontainer">	
		<div class="title">
			<h2>ALBERTA MEDICATION</h2>
			<h1>PRICE CALCULATOR</h1>
		</div>
	</div>
</div>

<div class="contentcontainer">	
	<div class="wholeline">
		<p>Welcome to the Alberta Drug Cost Calculator.
		To start, enter your drug in the search bar below and click on the entry you want to calculate the price for.
		You may add multiple items at a time and print off a complete list in the end.<br>
		<br>
		Please see notice on the bottom of the page for the assumptions made by the calculator.
		</p>
	</div>

	<div class="wholeline MT2em">
		<h3>Search for a drug name (generic or brand name):</h3>
		<div>
			<div class="wholeline">
				<input type="text" id="SearchBar" class="searchbar" onkeyup="ShowResult(this.value)">
			</div>
			<div class="wholeline">
				<div id="ResponseNames" class="searchbarlist"></div>
			</div>
		</div>
	</div>
	
	<div class="wholeline MT3em">
		<table id="DrugListTable">
			<col class="colGN">
			<col class="colSD">
			<col class="colBN">
			<col class="colUP">
			<col class="colQ">
			<col class="colDP">
			<col class="colF">
			<col class="colTP">
			<col class="colX">
			<thead>
				<tr>
					<th>Generic Name</th>
					<th>Strength & Dosage Form</th>
					<th>Brand Name</th>
					<th>Unit Price</th>
					<th>Quantity</th>
					<th class="RA">Drug Price</th>
					<th class="RA">Fees</th>
					<th class="RA">Total Price</th>
					<th></th>
				</tr>
			</thead>
			
			<tfoot>
				<tr>
					<th colspan="5">TOTAL</th>
					<th>
						<span id="TotalDPText"></span>
						<input type="hidden" id="TotalDPValue">
					</th>
					<th>
						<span id="TotalFText"></span>
						<input type="hidden" id="TotalFValue">
					</th>
					<th>
						<span id="TotalTPText"></span>
						<input type="hidden" id="TotalTPValue">
					</th>
					<th>
					</th>
				</tr>
			</tfoot>
			
			<tbody id="DrugListTableBody">
			</tbody>

		</table>
	</div>
	
	<div class="wholeline">
		<p class="notice">
			Note: A unit price of $0.000 usually means the drug is not a benefit - 
			try another brand or see the coverage details below for more information.
		</p>
	</div>
</div>

<div class="titlewrap MT3em">
	<div class="contentcontainer">
		<div class="title">
			<label for="CompareDivCheck">
				<div class="dropdownL">
					<img src="dropdown.png" id="CompareImg" class="imgReg" height="21" width="33">
				</div>
				<div class="dropdownR">
					COMPARE PRICES BY DAY SUPPLY
				</div>
			</label>
		</div>
	</div>
</div>

<input type="checkbox" id="CompareDivCheck" onchange="expandDiv(this)">

<div id="CompareDiv" class="contentcontainer">
	<div class="wholeline MT1em">
		<p>
			The below table will let you compare drug prices by the day supply using the information selected above 
			and the days supply specified below:<br>
			<br>
			<b>Day Supply #1: </b> <input type="number" id="CompDaySupply1" min="1" step="1" value="30" class="quantityinput" onclick="ComparePriceUpdateAll()" onkeyup="ComparePriceUpdateAll()"><br>
			<b>Day Supply #2: </b> <input type="number" id="CompDaySupply2" min="1" step="1" value="100" class="quantityinput"onclick="ComparePriceUpdateAll()" onkeyup="ComparePriceUpdateAll()">
		</p>
	</div>
	
	<div class="wholeline MT1em">
		<table id="CompareTable">
			<col class="colGN">
			<col class="colUP">
			<col class="colDPD">
			<col class="colDP1">
			<col class="colF1">
			<col class="colTP1">
			<col class="colDP2">
			<col class="colF2">
			<col class="colTP2">
			
			<thead>
				<tr>
					<th rowspan="2">Medication Name</th>
					<th rowspan="2">Unit Price</th>
					<th rowspan="2">Doses Per Day</th>
					<th colspan="3">Supply: <span id="DaySupplyHeader1">30 days</span></th>
					<th colspan="3">Supply: <span id="DaySupplyHeader2">100 days</span></th>
				</tr>
				
				<tr>
					<th class="RA">Drug Price</th>
					<th class="RA">Fees</th>
					<th class="RA">Total Price</th>
					
					<th class="RA">Drug Price</th>
					<th class="RA">Fees</th>
					<th class="RA">Total Price</th>
				</tr>
			</thead>
			
			<tfoot>
				<tr>
					<th colspan="3">TOTAL</th>
					<th>
						<span id="TotalDP1Text"></span>
						<input type="hidden" id="TotalDP1Value">
					</th>
					<th>
						<span id="TotalF1Text"></span>
						<input type="hidden" id="TotalF1Value">
					</th>
					<th>
						<span id="TotalTP1Text"></span>
						<input type="hidden" id="TotalTP1Value">
					</th>
					
					<th>
						<span id="TotalDP2Text"></span>
						<input type="hidden" id="TotalDP2Value">
					</th>
					<th>
						<span id="TotalF2Text"></span>
						<input type="hidden" id="TotalF2Value">
					</th>
					<th>
						<span id="TotalTP2Text"></span>
						<input type="hidden" id="TotalTP2Value">
					</th>
				</tr>
			</tfoot>
			
			<tbody id="CompareTableBody">
			</tbody>

		</table>
	</div>
</div>

<div class="titlewrap MT1em">
	<div class="contentcontainer">
		<div class="title">
			<label for="BenefitDivCheck">
				<div class="dropdownL">
					<img src="dropdown.png" id="BenefitImg" class="imgReg" height="21" width="33">
				</div>
				<div class="dropdownR">
					ALBERTA BLUE CROSS BENEFIT INFORMATION
				</div>
			</label>
		</div>
	</div>
</div>

<input type="checkbox" id="BenefitDivCheck" onchange="expandDiv(this)">

<div id="BenefitDiv" class="contentcontainer">
	<div class="wholeline MT1em">
		<p>
			The below information provides information on which medications are covered by Alberta Blue Cross public health plans.
			This information may vary if the patient has a private insurance plan.
		</p>
	</div>
	
	<div class="wholeline MT1em">
		<table id="BenefitTable">
			<col class="colBenMed">
			<col class="colBenCov">
			<col class="colBenClient">
			<col class="colBenClient">
			<col class="colBenClient">
			<col class="colBenClient">
			<col class="colBenClient">
			<col class="colBenClient">
			<col class="colBenClient">
			<col class="colBenClient">
			<col class="colBenClient">
			<col class="colBenClient">
			<col class="colBenClient">
			<thead>
				<tr>
					<th rowspan="2">Medication</th>
					<th rowspan="2">Coverage Status & Criteria</th>
					<th colspan="11">Group Number</th>
				</tr>
				<tr>
					<th class="plan"><a class="tooltip">1<span><b>Group 1: Non-Group coverage</b><br><i>Personal insurance purchased through Alberta Blue Cross</i></span></a></th>
					<th class="plan"><a class="tooltip">66<span><b>Group 66: Coverage for Seniors</b><br><i>All Alberta Residents over the age of 65 can register</i></span></a></th>
					<th class="plan"><a class="tooltip">66A<span><b>Group 66A: Alberta Widow's Pension Plan</b></span></a></th>
					<th class="plan"><a class="tooltip">19823<span><b>Group 19823: Income Support</b><br></span></a></th>
					<th class="plan"><a class="tooltip">19823A<span><b>Group 19823A: Alberta Human Services</b><br><i>Assured Income for the Severely Handicapped (AISH)</i></span></a></th>
					<th class="plan"><a class="tooltip">19824<span><b>Group 19824 :Children and Youth Services</b></span></a></th>
					<th class="plan"><a class="tooltip">20400<span><b>Group 20400, 20401, 20402: Alberta Child Health Benefit</b></span></a></th>
					<th class="plan"><a class="tooltip">20403<span><b>Group 20403: Child and Family Services</b></span></a></th>
					<th class="plan"><a class="tooltip">20514<span><b>Group 20514: Palliative Coverage</b><br><i>Patient may also have coverage under Group 1, 66, or 66A</i></span></a></th>
					<th class="plan"><a class="tooltip">22128<span><b>Group 22128: Learners Program</b></span></a></th>
					<th class="plan"><a class="tooltip">23609<span><b>Group 23609: Alberta Adult Health Benefit (AAHB)</b></span></a></th>
				</tr>
			</thead>
			
			<tfoot>
			</tfoot>
			
			<tbody id="BenefitTableBody">
			<tbody>
		</table>
	</div>
	
	<div class="wholeline">
		<p class="notice">
			Note: Hover over the group number for details.
		</p>
	</div>
	
	<div class="mb2em"></div>
</div>

<div class="titlewrap MT1em">
	<div class="contentcontainer">
		<div class="title">
			<label for="AboutDivCheck">
				<div class="dropdownL">
					<img src="dropdown.png" id="AboutImg" class="imgReg" height="21" width="33">
				</div>
				<div class="dropdownR">
					ABOUT THIS CALCULATOR
				</div>
			</label>
		</div>
	</div>
</div>

<input type="checkbox" id="AboutDivCheck" onchange="expandDiv(this)">

<div id="AboutDiv" class="contentcontainer">
	<div class="wholeline MT1em">
		<p>
		This calculator is based off the prices listed off the <a href="https://idbl.ab.bluecross.ca/idbl/load.do">Alberta Blue Cross Interactive Drug Benefit List</a>.
		While I strive to keep it updated and accurate, the following assumptions and compromises have been made:
		<ul class="listtext">
			<li>To reduce the burden on the Alberta Blue Cross servers, this information is only updated periodically (see bottom of page for latest date).
			<li>Prices are calculated assuming that the pharmacy is charging the amount allowed in the Alberta Blue Cross Pharmacy Services Agreement.
			<li>This list is only accurate for publicly-funded Alberta Blue Cross insurance plans - other plans may choose to cover more or less items.
			<li>Pharmacies are free to charge less than this amount. They cannot charge more if the claim is paid by an insurance plan. They may charge any fee amount if the claim is paid for in cash.
			<li>This does not calculate the impact any third party coverage may have on the costs.
		</ul>
		</p>
	</div>
	
	<div class="MB3em"></div>
</div>

<div class="titlewrap MT1em">
	<div class="contentcontainer">
		<div class="title">
			<div class="dropdownR">
				PRINT
			</div>
		</div>
	</div>
</div>

<div id="PrintDiv" class="contentcontainer">
	<div class="wholeline MT1em">
		<h2>Please select your print options:</h2>
	</div>
	
	<div class="wholeline MT1em">
		<div class="float">
			<p>
			<b>Prices based on:</b><br>
			<select id="PrintSelectPrice">
				<option>Quantity (first table)</option>
				<option>Day Supply (second table)</option>
			</select>
			</p>
		</div>
		
		<div class="float">
			<p>
			<b>Addition Information to Include:</b><br>
			<label><input type="checkbox" name="AdditionalPrint"> Brand Name</label><br>
			<label><input type="checkbox" name="AdditionalPrint"> Unit Price</label><br>
			<label><input type="checkbox" name="AdditionalPrint"> Drug Price</label><br>
			<label><input type="checkbox" name="AdditionalPrint"> Fees</label>
			<!-- <label><input type="checkbox" name="AdditionalPrint"> Benefit Information</label> -->
			</p>
		</div>
	</div>
	
	<div class="wholeline">
		<input type="button" value="Print List" onclick="Print()">
	</div>
	
	<div class="MB3em"></div>

</div>

<div class="footerpad">&nbsp </div>

<div class="footer">
	<div class="titlewrap">
		<div class="contentcontainer">
			<h3>Created by Joshua Torrance, BSc Pharm</h3>
			<i>Last Updated 2015-02-01</i>
		</div>
	</div>
</div>
</div>

<div id="PrintPage">
	<div class="letter">
		<div class="titlewrap">
			<div class="title">
				<h1>Prescription Medication Prices</h1>
			</div>
		</div>
		
		<div>
			<table id="PriceTable"></table>
			<i>LCA: Lowest Cost Alternative</i>
		</div>
	</div>

	<div class="footer">
		These medication costs are estimates based on the the best available information from 
		the Alberta Blue Cross Drug Benefit List (https://idbl.ab.bluecross.ca/idbl/load.do).
		Actual costs may vary depending on the pharmacy and your third party drug coverage.
	</div>
</div>
</body>
</html>
